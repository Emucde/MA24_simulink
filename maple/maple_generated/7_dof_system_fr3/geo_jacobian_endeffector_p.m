function tmpreturn = geo_jacobian_endeffector_p(q, q_p, param)
  m = [0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0;];
  t1 = q_p(6);
  t2 = t1 * param.l5;
  t3 = q(5);
  t4 = cos(t3);
  t6 = q_p(5);
  t7 = param.l6 + param.l7;
  t8 = t7 * t6;
  t9 = sin(t3);
  t10 = t9 * t8;
  t11 = q_p(4);
  t12 = t11 * param.l5;
  t5 = t4 * t2;
  t13 = t5 + t10 + t12;
  t14 = q(4);
  t15 = cos(t14);
  t16 = t15 * t13;
  t18 = t11 * t4 + t1;
  t19 = sin(t14);
  t21 = q_p(3);
  t22 = t9 * t21;
  t23 = t18 * t19 + t22;
  t24 = t23 * t7;
  t25 = t16 + t24;
  t26 = q(3);
  t27 = cos(t26);
  t29 = sin(t26);
  t30 = t29 * t21;
  t31 = t4 * t7;
  t32 = t31 * t30;
  t33 = q_p(2);
  t34 = t33 * param.l5;
  t35 = t32 - t34;
  t36 = t15 * t35;
  t37 = t7 * t33;
  t38 = t4 * t37;
  t39 = param.l5 * t30;
  t40 = -t38 - t39;
  t42 = t4 * t8;
  t43 = t9 * t1;
  t44 = param.l5 * t43;
  t46 = t29 * (t42 - t44);
  t41 = t19 * t40;
  t47 = t25 * t27 + t36 + t41 + t46;
  t48 = q(2);
  t49 = cos(t48);
  t51 = t4 * t33;
  t52 = sin(t48);
  t58 = q_p(1);
  t59 = t9 * t58;
  t50 = t15 * t7;
  t55 = t52 * t19;
  t61 = t50 * t51 * t52 - t34 * t55 + t59 * t7;
  t63 = t4 * t58;
  t66 = -t18 * t52 + t29 * t63;
  t68 = t15 * t66 * t7;
  t69 = t29 * t58;
  t70 = param.l5 * t69;
  t74 = t52 * t33;
  t75 = t9 * t29;
  t76 = t7 * t75;
  t77 = t76 * t74;
  t79 = q(6);
  t80 = sin(t79);
  t84 = param.l5 * t6;
  t85 = t9 * t84;
  t86 = t11 * t7;
  t87 = -t1 * t4 * t7 + t85 - t86;
  t88 = cos(t79);
  t89 = t88 * t87;
  t90 = t11 * param.l4;
  t92 = t15 * (t89 + t90);
  t78 = param.l5 * t88;
  t94 = t23 * t78;
  t95 = t11 * param.l3;
  t96 = t19 * t95;
  t99 = t21 * param.l5;
  t100 = t29 * t4;
  t101 = t100 * t99;
  t102 = t101 + t37;
  t104 = t21 * param.l3;
  t105 = t29 * t104;
  t106 = t33 * param.l4;
  t81 = t88 * t102;
  t108 = (t81 - t105 - t106) * t15;
  t109 = param.l5 * t51;
  t110 = t7 * t30;
  t111 = -t109 + t110;
  t113 = t4 * t84;
  t114 = t7 * t43;
  t116 = t29 * (t113 + t114);
  t119 = param.l4 * t21;
  t120 = t29 * t119;
  t121 = t33 * param.l3;
  t124 = t33 * param.l2;
  t128 = t4 * t78;
  t129 = -t128 + param.l3;
  t130 = t15 * t129;
  t131 = t130 * t74;
  t132 = t7 * t19;
  t133 = t132 * t74;
  t134 = t58 * param.l5;
  t135 = t9 * t134;
  t137 = t88 * (t133 + t135);
  t138 = param.l4 * t19;
  t139 = -t138 + param.l3;
  t140 = t139 * t74;
  t145 = t52 * t11;
  t146 = t69 - t145;
  t150 = t69 * t7;
  t151 = -t87;
  t155 = param.l5 * t75;
  t160 = t19 * t146 * param.l4;
  t161 = param.l3 * t58;
  t162 = t29 * t161;
  t164 = q(1);
  t165 = sin(t164);
  t169 = -t19 * param.l5 + t15 * t31;
  t174 = t4 * t21;
  t175 = t50;
  t176 = t175 * t174;
  t177 = t19 * t21;
  t179 = -param.l5 * t177 + t176 + t42 - t44;
  t181 = -t13;
  t183 = t52 * t134;
  t191 = t30 * t9;
  t192 = t19 * (-t18 * t29 + t52 * t63) - t191;
  t196 = t88 * t132;
  t200 = param.l5 * t9;
  t201 = t200 * t29 * t88;
  t127 = t15 * t129;
  t206 = t21 * t127;
  t207 = t7 * t21;
  t211 = t139 * t21;
  t215 = t52 * t58;
  t216 = t7 * t215;
  t219 = t29 * t11;
  t220 = t215 - t219;
  t221 = t220 * param.l4;
  t226 = t220 * param.l3;
  t142 = t49 * t58;
  t172 = t88 * (t19 * t207 + t113 + t114);
  t230 = ((t169 * t27 - t76) * t142 + t27 * t179 + t15 * (t181 * t29 + t183) + t192 * t7) * t80 - t49 * (t27 * (t130 - t196 + t138 - param.l3) + t201) * t58 + (t172 - t206 + t211) * t27 + t15 * (t88 * (t151 * t29 - t216) + t221) + t88 * t192 * param.l5 - t19 * t226 + t52 * t58 * param.l2;
  t231 = cos(t164);
  t194 = t19 * (t13 * t52 - t70);
  t195 = t27 * t61;
  t205 = t111 * t19 + t116;
  t210 = t19 * (t121 - t120);
  t218 = t15 * (param.l5 * t66 * t88 - param.l3 * t146);
  t223 = t19 * (-t151 * t52 + t150) - t155 * t74;
  m(1,1) = ((t47 * t49 + t194 + t195 + t68 - t77) * t80 + (t27 * (t92 + t94 - t96) + t108 + t205 * t88 + t210 + t105 - t124) * t49 + t27 * (-t131 + t137 + t140) + t218 + t223 * t88 - t160 + t162) * t165 - t231 * t230;
  t234 = t18 * param.l5;
  t235 = t88 * t234;
  t236 = t235 - t95;
  t242 = t88 * t111;
  t246 = t80 * t47 + t27 * (t200 * t21 * t88 + t19 * t236 + t92) + t108 + t19 * (t242 - t120 + t121) + t88 * t116 + t105 - t124;
  t250 = t18 * t7;
  t251 = t15 * t250;
  t253 = t37 * t75;
  t257 = -t88 * t7;
  t258 = t257 + param.l4;
  t260 = t19 * t258 - param.l3 + t130;
  t264 = t88 * t151;
  t265 = t264 - t90;
  t247 = t27 * t33;
  t269 = (-t169 * t247 + t181 * t19 + t251 + t253) * t80 + t260 * t247 + t15 * t236 + t19 * t265 + t155 * t88 * t33;
  t271 = t246 * t52 + t269 * t49;
  t273 = -t169;
  t267 = t27 * t273;
  t275 = t267 + t76;
  t280 = param.l5 * t15;
  t281 = t19 * t4;
  t282 = t7 * t281;
  t290 = t52 * (t260 * t27 + t275 * t80 + t201) + (t80 * (t280 + t282) + t15 * t258 - t19 * t129 + param.l2) * t49;
  m(1,2) = -t165 * t290 * t58 + t231 * t271;
  t300 = -t80 * t179;
  t302 = -t172;
  t306 = t19 * t134;
  t308 = t7 * t9 * t74;
  t315 = t52 * t9;
  t317 = -t19 * t58 * t7 + t315 * t34;
  t322 = t29 * (t49 * (t25 * t80 + t92 + t94 - t96) + t80 * t61 - t131 + t137 + t140) + t27 * (t49 * (t300 + t206 + t302 - t211) + t80 * (-t175 * t63 + t306 + t308) + t58 * t127 + t88 * t317 - t139 * t58);
  t325 = t273 * t80 - param.l3 + t130 + t138 - t196;
  t332 = t7 * t80 + t78;
  t336 = t15 * t181;
  t337 = t336 - t24;
  t339 = t15 * t265;
  t342 = (t142 * t325 + t206 - t211 + t300 + t302) * t29 + (-t332 * t49 * t58 * t9 + t337 * t80 + t339 - t94 + t96) * t27;
  m(1,3) = -t165 * t342 + t231 * t322;
  t347 = t27 * t52;
  t349 = t4 * t146;
  t350 = t52 * t1;
  t351 = t347 * t51 + t349 - t350;
  t364 = t27 * t74;
  t365 = t364 + t69 - t145;
  t372 = t27 * t33;
  t373 = param.l5 * t52;
  t375 = t4 * t1;
  t377 = t10 + t12;
  t384 = t27 * t7;
  t387 = t85 - t86;
  t397 = t19 * (t80 * (t49 * (t13 * t27 + t32 - t34) + t351 * t7) + t88 * (t49 * (t27 * t87 + t101 + t37) + param.l5 * t351) + t49 * (t27 * t90 - t105 - t106) - t365 * param.l3) - t15 * (t80 * (t49 * (t250 * t27 - t38 - t39) - t372 * t373 + t373 * t375 + t52 * t377 - t70) + t88 * (t49 * (t234 * t27 - t109 + t110) + t384 * t74 - t31 * t350 + t52 * t387 + t150) + t49 * (-t27 * t95 - t120 + t121) - t365 * param.l4);
  t399 = t27 * t58;
  t403 = t2 * t100;
  t404 = t29 * t377;
  t407 = t49 * t58;
  t408 = t4 * t27;
  t411 = t27 * t21;
  t414 = t29 * t1;
  t415 = t31 * t414;
  t416 = -t387;
  t417 = t29 * t416;
  t389 = t4 * t220;
  t429 = t389 - t414;
  t444 = t19 * (t80 * (-t31 * t399 * t49 - t174 * t384 - t183 + t403 + t404) + t88 * (-param.l5 * t4 * t411 - param.l5 * t407 * t408 + t216 - t415 - t417) + t27 * t49 * t161 + t104 * t27 - t221) - (t80 * (param.l5 * t27 * t407 + param.l5 * t411 - t429 * t7) + t88 * (-t399 * t49 * t7 - param.l5 * t429 - t207 * t27) + t27 * param.l4 * t407 + t27 * t119 + t226) * t15;
  m(1,4) = -t165 * t444 + t231 * t397;
  t446 = t15 * t21;
  t447 = t29 * t446;
  t449 = -t11 * t27 + t33;
  t451 = t29 * t6;
  t454 = t372 - t11;
  t460 = t15 * t6;
  t461 = t460 + t21;
  t466 = t19 * t6 - t29 * t33;
  t469 = (t27 * t461 * t49 + t466 * t52 + t399) * t4;
  t445 = t19 * t449;
  t470 = ((t445 - t447 - t451) * t49 - t15 * (t454 * t52 + t69)) * t9 + t469;
  t472 = t15 * t27;
  t473 = t472 * t407;
  t477 = t27 * t6;
  t481 = (t407 + t460 + t21) * t100;
  t482 = t9 * (t15 * t411 + t19 * t215 - t19 * t219 + t473 + t477) + t481;
  t486 = param.l5 * t80;
  t487 = t257 + t486;
  t489 = t15 * t9;
  t476 = (t27 * t489 + t100) * t49;
  m(1,5) = -(-t165 * t482 + t231 * t470) * t332 + t1 * t487 * (t231 * t476 + t165 * t408 + t9 * (-t15 * t165 * t29 + t231 * t55));
  t504 = t4 * t19 * t11;
  t505 = t19 * t1;
  t506 = t504 + t22 + t505;
  t507 = t506 * t7;
  t508 = t336 - t507;
  t510 = -t35;
  t511 = t15 * t510;
  t512 = t33 * t19;
  t513 = t512 - t451;
  t516 = t29 * param.l5;
  t517 = t177 + t43;
  t518 = t517 * t516;
  t522 = -t195;
  t523 = t349 - t350;
  t531 = t19 * t377;
  t536 = t506 * param.l5;
  t538 = t27 * (t15 * t87 + t536);
  t539 = t15 * t102;
  t543 = t517 * t7 * t29;
  t546 = t4 * t15;
  t498 = t513 * t4;
  t560 = ((t27 * t508 + t498 * t7 + t511 + t518) * t49 + t522 - t15 * t523 * t7 - t5 * t55 + t29 * (t306 + t308) - t52 * t531) * t88 + ((-param.l5 * t498 + t538 + t539 + t543) * t49 + t27 * (t34 * t52 * t546 + t133 + t135) + t15 * param.l5 * t523 - t282 * t350 - t29 * t317 + t387 * t55) * t80;
  t565 = param.l5 * t517 - t176 - t42;
  t569 = t220 * t19;
  t572 = (t22 + t505) * t29;
  t573 = t4 * t569 - t572;
  t578 = t280 * t4 + t132;
  t584 = t517 * t7;
  t592 = t88 * (t49 * t275 * t58 + t27 * t565 + t15 * (t403 + t404 - t183) - t573 * t7) + t80 * (t49 * (t27 * t578 - t155) * t58 + t27 * (t546 * t99 + t113 + t584) + t15 * (t415 + t417 - t216) + t573 * param.l5);
  m(1,6) = t165 * t592 + t231 * t560;
  m(1,7) = 0.0e0;
  t606 = -t81;
  m(2,1) = (((t27 * t337 - t41 - t46 + t511) * t49 + t522 - t68 - t194 + t77) * t80 + (t27 * (t339 - t94 + t96) + t15 * (t606 + t105 + t106) - t205 * t88 - t210 - t105 + t124) * t49 + (t131 - t137 - t140) * t27 - t218 - t223 * t88 + t160 - t162) * t231 - t165 * t230;
  m(2,2) = t231 * t290 * t58 + t165 * t271;
  m(2,3) = t165 * t322 + t231 * t342;
  m(2,4) = t165 * t397 + t231 * t444;
  t644 = t29 * t15;
  m(2,5) = -(t165 * t470 + t231 * t482) * t332 - (-t165 * t476 + t231 * t408 - t9 * (t165 * t55 + t231 * t644)) * t1 * t487;
  m(2,6) = t165 * t560 - t231 * t592;
  m(2,7) = 0.0e0;
  m(3,1) = 0.0e0;
  m(3,2) = t246 * t49 - t269 * t52;
  t668 = t49 * t33;
  m(3,3) = t52 * (t29 * (t508 * t80 - t536 * t88 + t339 + t96) - (t80 * t565 + t206 + t88 * (-t113 - t584) - t211) * t27) - (-t27 * t332 * t9 + t29 * t325) * t668;
  t674 = t80 * t250;
  m(3,4) = t52 * (t15 * (t27 * (t674 + t235 - t95) + t80 * t40 + t242 - t120 + t121) + (t27 * (t181 * t80 + t264 - t90) + t80 * t510 + t606 + t105 + t106) * t19) - t49 * (t15 * (-t27 * (t486 + t257 + param.l4) * t33 + t80 * t13 + t89 + t90) + (t27 * (-t31 * t80 + param.l3 - t128) * t33 + t674 + t235 - t95) * t19);
  t705 = t6 * t9;
  t714 = -t466;
  t717 = (t15 * t454 * t9 + t4 * t714) * t49;
  t721 = t19 * t49;
  t724 = t29 * t52;
  m(3,5) = ((t15 * (t4 * t477 - t191) - t29 * t705 + t9 * t445 + t27 * t174) * t52 + t717) * t332 + t1 * (t9 * (-t15 * t347 + t721) - t4 * t724) * t487;
  t693 = -t513 * t4;
  m(3,6) = ((t27 * (t16 + t507) + t36 + t7 * t693 - t518) * t88 - t80 * (param.l5 * t693 + t538 + t539 + t543)) * t52 - ((t2 * t281 - t267 * t33 - t251 - t253 + t531) * t88 + (t33 * t516 * t9 + t15 * t234 + t19 * t416 - t247 * t578 + t31 * t505) * t80) * t49;
  m(3,7) = 0.0e0;
  m(4,1) = 0.0e0;
  t758 = t231 * t58;
  m(4,2) = -t758;
  t759 = t165 * t58;
  t719 = t49 * t33;
  m(4,3) = t231 * t719 - t759 * t52;
  t767 = -t33 * t724 + (t21 * t49 + t58) * t27;
  t770 = t407 + t21;
  m(4,4) = -t165 * t29 * t770 + t231 * t767;
  t732 = t29 * t21;
  t736 = t449 * t15;
  t779 = (t49 * t732 - t145 + t364 + t69) * t19 + t49 * t736;
  t784 = t19 * t27 * t770 - t15 * t220;
  m(4,5) = t165 * t784 + t231 * t779;
  t786 = t19 * t27;
  t788 = -t11 * t786 - t447 - t451 + t512;
  t793 = t9 * (-t15 * t365 + t49 * t788) + t469;
  t748 = t27 * (t446 + t6);
  t799 = (t748 + t473 + t569) * t9 + t481;
  m(4,6) = -t165 * t799 + t231 * t793;
  t823 = t27 * (t375 + t11) * t15 - t33 * t15 - t517 * t29;
  t763 = t27 * (-t489 * t6 - t22 - t504 - t505) - (t447 + t451 - t512) * t4;
  t830 = (t763 * t49 + t27 * (-t546 * t74 - t59) + (-t349 + t350) * t15 - t466 * t315) * t80 + (t49 * t823 + (t375 * t52 + t145 - t364 - t69) * t19) * t88;
  t851 = (t49 * (t472 * t4 - t75) * t58 + t4 * t748 - t644 * t705 + t19 * t389 - t572) * t80 + t88 * (t407 * t786 + t27 * t517 + (t29 * t375 - t215 + t219) * t15);
  m(4,7) = -t165 * t851 + t231 * t830;
  m(5,1) = 0.0e0;
  m(5,2) = -t759;
  m(5,3) = t165 * t719 + t52 * t758;
  m(5,4) = t231 * t29 * t770 + t165 * t767;
  m(5,5) = t165 * t779 - t231 * t784;
  m(5,6) = t165 * t793 + t231 * t799;
  m(5,7) = t165 * t830 + t231 * t851;
  m(6,1) = 0.0e0;
  m(6,2) = 0.0e0;
  m(6,3) = -t74;
  m(6,4) = -t21 * t27 * t52 - t29 * t668;
  m(6,5) = (-t19 * t732 - t736) * t52 + t454 * t721;
  m(6,6) = t52 * (-t408 * t461 - t788 * t9) - t717;
  m(6,7) = (-t763 * t80 - t823 * t88) * t52 + t49 * (t80 * (t15 * t18 - t472 * t51 + t714 * t9) + (t375 - t372 + t11) * t19 * t88);
  tmpreturn = m;
