function tmpreturn = gravitational_forces(q, param)
  m = [0 0 0 0 0 0 0;];
  t1 = param.sp7_x * param.m7;
  t2 = q(7);
  t3 = cos(t2);
  t5 = param.sp7_y * param.m7;
  t6 = sin(t2);
  t11 = -param.l5 * param.m7 - param.m8 * param.l5 - param.sp6_x * param.m6 - t1 * t3 + t5 * t6;
  t12 = q(6);
  t13 = cos(t12);
  t18 = -param.l6 * param.m8 + param.m6 * param.sp6_y - param.m7 * param.sp7_z;
  t19 = sin(t12);
  t20 = t19 * t18;
  t21 = param.sp5_x * param.m5;
  t23 = q(5);
  t24 = cos(t23);
  t25 = t24 * (t11 * t13 + t20 - t21);
  t30 = param.m5 * param.sp5_y - param.m6 * param.sp6_z - t1 * t6 - t3 * t5;
  t31 = sin(t23);
  t32 = t31 * t30;
  t33 = param.m5 * param.l3;
  t34 = param.m6 * param.l3;
  t35 = param.l3 * param.m7;
  t36 = param.m8 * param.l3;
  t37 = param.sp4_x * param.m4;
  t38 = t25 + t32 + t33 + t34 + t35 + t36 - t37;
  t39 = q(4);
  t40 = cos(t39);
  t41 = t40 * t38;
  t43 = -t11;
  t51 = t18 * t13 + t19 * t43 + param.l4 * param.m7 + param.l4 * param.m6 + param.m8 * param.l4 + param.m5 * (param.sp5_z + param.l4) + param.sp4_y * param.m4;
  t52 = sin(t39);
  t53 = t52 * t51;
  t56 = param.sp3_x * param.m3;
  t57 = t41 + t53 - t35 - t34 - t36 + (-param.m4 - param.m5) * param.l3 - t56;
  t58 = q(3);
  t59 = cos(t58);
  t62 = t43 * t31;
  t65 = -t20;
  t66 = t65 + t21;
  t68 = param.sp3_y * param.m3;
  t69 = param.sp4_z * param.m4;
  t70 = t13 * t62 + t24 * t30 + t31 * t66 + t68 - t69;
  t71 = sin(t58);
  t73 = param.sp2_x * param.m2;
  t74 = t57 * t59 + t70 * t71 - t73;
  t76 = q(2);
  t77 = cos(t76);
  t79 = t70 * param.g_x;
  t83 = sin(t76);
  t84 = param.g_y * t83;
  t85 = t40 * t51;
  t87 = t52 * t38;
  t97 = param.m3 * param.l2 + param.l2 * param.m4 + param.l2 * param.m5 + param.l2 * param.m6 + param.m7 * param.l2 + param.l2 * param.m8 - param.sp2_y * param.m2 + param.sp3_z * param.m3;
  t98 = t97 * param.g_y;
  t102 = -param.m1 * param.sp1_y - param.m2 * param.sp2_z;
  t107 = q(1);
  t108 = cos(t107);
  t110 = sin(t107);
  t113 = param.g_y * t70;
  t117 = t83 * param.g_x;
  t120 = t97 * param.g_x;
  t95 = param.g_y * t77;
  t112 = param.g_x * t77;
  m(1,1) = (param.g_x * t57 * t71 + param.g_y * param.m1 * param.sp1_x + param.g_x * t102 - t59 * t79 - t74 * t95 + t83 * t98 + t84 * t85 - t84 * t87) * t108 - t110 * (param.g_x * param.m1 * param.sp1_x - param.g_y * t57 * t71 - param.g_y * t102 - t112 * t74 + t113 * t59 + t117 * t85 - t117 * t87 + t120 * t83);
  t129 = param.g_y * t110;
  t126 = t108 * param.g_x;
  t130 = t126 + t129;
  t132 = -param.m4 * param.l3 - t33 - t34 - t35 - t36 + t41 + t53 - t56;
  t135 = t51 * param.g_z;
  t137 = param.g_z * t38;
  t142 = t31 * t71;
  t143 = t13 * t43;
  t151 = t24 * t71 * t30 + t143 * t142 - t20 * t142 + param.m5 * t31 * t71 * param.sp5_x + t71 * (t68 - t69) - t73;
  m(1,2) = (param.g_y * t110 * t151 + t130 * t132 * t59 - param.g_z * t97 + t126 * t151 - t135 * t40 + t137 * t52) * t83 + t77 * (param.g_z * t132 * t59 - t130 * t38 * t52 + t130 * t40 * t51 + param.g_z * t151 + t108 * t120 + t110 * t98);
  t176 = t40 * (t25 + t32 + t35 + t34 + (param.m5 + param.m8) * param.l3 - t37) + t53 - t35 - t34 + (-param.m8 - param.m4 - param.m5) * param.l3 - t56;
  t177 = param.g_x * t176;
  t196 = param.g_z * t83;
  m(1,3) = (t108 * (t177 * t77 - t113) + t110 * t176 * t95 + t110 * t79 - param.g_z * t176 * t83) * t71 + (t108 * (-param.g_y * t176 - t77 * t79) - t77 * t70 * t129 + t110 * t177 + t70 * t196) * t59;
  t200 = param.g_x * t38;
  t201 = t77 * t59;
  t203 = param.g_x * t51;
  t205 = t38 * t71;
  t210 = t59 * param.g_y;
  t214 = t59 * t83;
  t225 = t51 * t71;
  t209 = param.g_y * t83;
  m(1,4) = (t108 * (param.g_y * t205 + t200 * t201 - t203 * t83) + t77 * (t110 * t210 * t38 - t135) - t214 * t137 - t110 * (param.g_x * t205 + t209 * t51)) * t52 - (t108 * (param.g_y * t225 + t200 * t83 + t201 * t203) + t77 * (t110 * t210 * t51 + t137) - t214 * t135 + t110 * (-param.g_x * t225 + t209 * t38)) * t40;
  t241 = t143 + t65 + t21;
  t243 = t59 * t40 * t241;
  t244 = t71 * t30;
  t251 = t71 * param.g_y;
  t253 = t117 * t52 + t251 * t40;
  t258 = t52 * param.g_z;
  t260 = t110 * t30;
  t268 = t110 * param.g_x;
  t272 = t71 * t110;
  t276 = t43 * t52;
  t281 = t71 * param.g_z;
  t287 = t30 * t40;
  m(1,5) = ((-(t243 - t244) * t112 - t59 * t30 * param.g_y - t241 * t253) * t108 + t77 * (-t129 * t243 - t143 * t258 + t251 * t260 - t258 * t66) + t59 * (param.g_z * t241 * t40 * t83 + t268 * t30) + t40 * t241 * param.g_x * t272 - t83 * (t129 * t13 * t276 + t129 * t52 * t66 + t281 * t30)) * t31 - (((t241 * t71 + t287 * t59) * t112 - t59 * t241 * param.g_y + t253 * t30) * t108 + (param.g_y * t260 * t40 * t59 + param.g_y * t272 * t66 + t129 * t143 * t71 + t258 * t30) * t77 + t59 * (-t196 * t287 + t241 * t268) - t40 * t244 * t268 - t83 * (-param.g_y * t260 * t52 + param.g_z * t66 * t71 + t143 * t281)) * t24;
  t324 = t43 * t24;
  t326 = t18 * t52;
  t327 = t324 * t40 - t326;
  t333 = t31 * param.g_y;
  t353 = t129 * t142 - t24 * t258;
  t361 = t31 * param.g_x;
  t362 = t110 * t43;
  t367 = t71 * param.g_x;
  t373 = t83 * t129;
  t376 = t52 * param.g_x;
  t377 = t110 * t18;
  t384 = t18 * t24;
  t386 = t384 * t40 + t276;
  t339 = param.g_y * t59 * t110;
  t341 = t18 * t40;
  t346 = t40 * t43;
  t348 = t83 * t24 * param.g_z;
  t355 = t110 * t40;
  m(1,6) = ((-(-t142 * t43 + t327 * t59) * t112 - t59 * t43 * t333 + t40 * (-t117 * t18 - t251 * t324) - t52 * (t117 * t324 - t18 * t251)) * t108 + (-param.g_z * t341 - t327 * t339 + t353 * t43) * t77 + (-t196 * t326 + t346 * t348 + t361 * t362) * t59 + (-t18 * t84 + t324 * t367) * t355 - t24 * t276 * t373 - (t196 * t62 + t376 * t377) * t71) * t19 - t13 * (t108 * (t77 * (-t142 * t18 + t386 * t59) * param.g_x + t59 * t18 * t333 + t40 * (-t117 * t43 + t251 * t384) + t52 * (t117 * t384 + t251 * t43)) + (-param.g_z * t346 - t18 * t353 + t339 * t386) * t77 + (-t196 * t276 - t341 * t348 - t361 * t377) * t59 - (t367 * t384 + t43 * t84) * t355 + t24 * t326 * t373 - (-t18 * t196 * t31 + t362 * t376) * t71);
  t432 = t13 * t24;
  t436 = t40 * (param.sp7_x * t31 - param.sp7_y * t432);
  t437 = t19 * t52;
  t440 = t59 * (param.sp7_y * t437 + t436);
  t441 = t31 * t13;
  t443 = param.sp7_x * t24;
  t444 = param.sp7_y * t441 + t443;
  t451 = param.g_y * param.sp7_y;
  t452 = t71 * t432;
  t454 = param.g_y * param.sp7_x;
  t456 = t83 * param.sp7_y;
  t457 = param.g_x * t19;
  t461 = t13 * param.sp7_y;
  t462 = t24 * t117;
  t464 = t19 * t71;
  t466 = t83 * param.sp7_x;
  t473 = param.g_z * param.sp7_y;
  t474 = t19 * t40;
  t477 = t13 * t52;
  t481 = t110 * t13;
  t482 = t71 * t481;
  t484 = param.g_z * param.sp7_x;
  t496 = -param.g_x * t110 * t13 * t31 + t196 * t437;
  t500 = t24 * t367;
  t502 = t19 * t83;
  t504 = t71 * param.sp7_x;
  t509 = t52 * t481;
  t518 = t52 * t110;
  t519 = t31 * t83;
  t521 = t71 * param.sp7_y;
  t530 = t40 * (param.sp7_x * t432 + param.sp7_y * t31);
  t533 = t59 * (-param.sp7_x * t437 + t530);
  t536 = param.sp7_x * t441 - param.sp7_y * t24;
  t548 = t13 * param.sp7_x;
  t505 = t83 * t13 * t142;
  m(1,7) = -(((-(t444 * t71 + t440) * t112 + t59 * t444 * param.g_y + t40 * (-t142 * t454 + t451 * t452 + t456 * t457) - (t361 * t466 + t451 * t464 - t461 * t462) * t52) * t108 + t77 * (-t440 * t129 + t474 * t473 + t24 * (-t272 * t454 + t473 * t477) - (t451 * t482 + t484 * t52) * t31) + t59 * (param.sp7_y * t496 + t196 * t436 - t268 * t443) + t40 * (t361 * t504 + t451 * t502 - t461 * t500) * t110 + t24 * (t451 * t509 + t484 * t71) * t83 + t473 * t505 - (t454 * t519 - t457 * t521) * t518) * t3 + t6 * (((-t536 * t71 + t533) * t112 + t59 * t536 * param.g_y + t40 * (t142 * t451 + t452 * t454 + t457 * t466) - (-t361 * t456 + t454 * t464 - t462 * t548) * t52) * t108 + t77 * (t533 * t129 + t474 * t484 + t24 * (t272 * t451 + t477 * t484) - (t454 * t482 - t473 * t52) * t31) + t59 * (param.g_x * param.sp7_y * t110 * t24 + param.sp7_x * t496 - t196 * t530) + t40 * (-t361 * t521 + t454 * t502 - t500 * t548) * t110 + t24 * (t454 * t509 - t473 * t71) * t83 + t484 * t505 + (t451 * t519 + t457 * t504) * t518)) * param.m7;
  tmpreturn = m';
