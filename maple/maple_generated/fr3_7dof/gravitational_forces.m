function tmpreturn = gravitational_forces(q, param)
  m = [0 0 0 0 0 0 0;];
  t1 = param.sp7_x * param.m7;
  t2 = q(7);
  t3 = cos(t2);
  t5 = param.sp7_y * param.m7;
  t6 = sin(t2);
  t11 = -param.l5 * param.m7 - param.m8 * param.l5 - param.sp6_x * param.m6 - t1 * t3 + t5 * t6;
  t12 = q(6);
  t13 = cos(t12);
  t18 = -param.l6 * param.m8 + param.m6 * param.sp6_y - param.m7 * param.sp7_z;
  t19 = sin(t12);
  t20 = t19 * t18;
  t21 = param.sp5_x * param.m5;
  t23 = q(5);
  t24 = cos(t23);
  t25 = t24 * (t11 * t13 + t20 - t21);
  t30 = param.m5 * param.sp5_y - param.m6 * param.sp6_z - t1 * t6 - t3 * t5;
  t31 = sin(t23);
  t32 = t31 * t30;
  t33 = param.m5 * param.l3;
  t34 = param.m6 * param.l3;
  t35 = param.l3 * param.m7;
  t36 = param.m8 * param.l3;
  t37 = param.sp4_x * param.m4;
  t38 = t25 + t32 + t33 + t34 + t35 + t36 - t37;
  t39 = q(4);
  t40 = cos(t39);
  t41 = t40 * t38;
  t43 = -t11;
  t51 = t18 * t13 + t19 * t43 + param.l4 * param.m7 + param.l4 * param.m6 + param.l4 * param.m8 + param.m5 * (param.sp5_z + param.l4) + param.sp4_y * param.m4;
  t52 = sin(t39);
  t53 = t52 * t51;
  t56 = param.sp3_x * param.m3;
  t57 = t41 + t53 - t35 - t34 - t36 + (-param.m4 - param.m5) * param.l3 - t56;
  t58 = q(3);
  t59 = cos(t58);
  t62 = t43 * t31;
  t65 = -t20;
  t66 = t65 + t21;
  t68 = param.sp3_y * param.m3;
  t69 = param.sp4_z * param.m4;
  t70 = t13 * t62 + t24 * t30 + t31 * t66 + t68 - t69;
  t71 = sin(t58);
  t73 = param.sp2_x * param.m2;
  t76 = q(2);
  t77 = cos(t76);
  t79 = t70 * param.g_x;
  t83 = sin(t76);
  t84 = t83 * param.g_y;
  t85 = t40 * t51;
  t87 = t38 * param.g_y;
  t88 = t52 * t83;
  t98 = param.m3 * param.l2 + param.l2 * param.m4 + param.l2 * param.m5 + param.l2 * param.m6 + param.l2 * param.m7 + param.m8 * param.l2 - param.sp2_y * param.m2 + param.sp3_z * param.m3;
  t99 = t98 * param.g_y;
  t103 = -param.m1 * param.sp1_y - param.m2 * param.sp2_z;
  t108 = q(1);
  t109 = cos(t108);
  t111 = sin(t108);
  t114 = t70 * param.g_y;
  t118 = t83 * param.g_x;
  t120 = t38 * param.g_x;
  t122 = t98 * param.g_x;
  t96 = (t57 * t59 + t70 * t71 - t73) * t77;
  m(1,1) = (param.g_x * t57 * t71 + param.g_y * param.m1 * param.sp1_x + param.g_x * t103 - param.g_y * t96 - t59 * t79 + t83 * t99 + t84 * t85 - t87 * t88) * t109 - t111 * (param.g_x * param.m1 * param.sp1_x - param.g_y * t57 * t71 - param.g_x * t96 - param.g_y * t103 + t114 * t59 + t118 * t85 - t120 * t88 + t122 * t83);
  t131 = param.g_y * t111;
  t132 = param.g_x * t109 + t131;
  t137 = t51 * param.g_z;
  t139 = t38 * param.g_z;
  t144 = t31 * t71;
  t145 = t13 * t43;
  t153 = t24 * t71 * t30 + t145 * t144 - t20 * t144 + param.m5 * t31 * t71 * param.sp5_x + t71 * (t68 - t69) - t73;
  t149 = (-param.m4 * param.l3 - t33 - t34 - t35 - t36 + t41 + t53 - t56) * t59;
  m(1,2) = (param.g_x * t109 * t153 + param.g_y * t111 * t153 - param.g_z * t98 + t132 * t149 - t137 * t40 + t139 * t52) * t83 + (-t132 * t38 * t52 + t132 * t40 * t51 + param.g_z * t149 + param.g_z * t153 + t109 * t122 + t111 * t99) * t77;
  t178 = t40 * (t25 + t32 + t35 + t34 + (param.m5 + param.m8) * param.l3 - t37) + t53 - t35 - t34 + (-param.m8 - param.m4 - param.m5) * param.l3 - t56;
  t179 = param.g_x * t178;
  m(1,3) = t71 * (t109 * (t179 * t77 - t114) + t77 * t178 * t131 + t111 * t79 - t83 * t178 * param.g_z) + (t109 * (-param.g_y * t178 - t77 * t79) - t77 * t70 * t131 + t111 * t179 + t83 * t70 * param.g_z) * t59;
  t201 = t59 * param.g_x;
  t206 = param.g_y * t71;
  t214 = t59 * t83;
  t218 = t71 * param.g_x;
  t196 = t51 * t83;
  m(1,4) = ((t201 * t38 * t77 - param.g_x * t196 + t206 * t38) * t109 + t77 * (t131 * t38 * t59 - t137) - t214 * t139 - (param.g_y * t196 + t218 * t38) * t111) * t52 - (t109 * (t201 * t51 * t77 + t120 * t83 + t206 * t51) + t77 * (t131 * t51 * t59 + t139) - t214 * t137 + (-t218 * t51 + t83 * t87) * t111) * t40;
  t241 = t145 + t65 + t21;
  t242 = t241 * t40;
  t244 = t71 * t30;
  t252 = t118 * t52 + t206 * t40;
  t256 = param.g_y * t40;
  t257 = t111 * t241;
  t260 = t52 * param.g_z;
  t262 = t111 * t30;
  t268 = t83 * param.g_z;
  t270 = t111 * param.g_x;
  t276 = t43 * t52;
  t280 = t111 * t52;
  t282 = t71 * param.g_z;
  t288 = t30 * t40;
  m(1,5) = t31 * (t109 * (-t77 * (t242 * t59 - t244) * param.g_x - t59 * t30 * param.g_y - t241 * t252) + t77 * (-param.g_z * t52 * t66 - t256 * t257 * t59 - t145 * t260 + t206 * t262) + t59 * (t242 * t268 + t270 * t30) + t40 * t257 * t218 - (param.g_y * t280 * t66 + t13 * t131 * t276 + t282 * t30) * t83) - (t109 * (t77 * (t241 * t71 + t288 * t59) * param.g_x - t59 * t241 * param.g_y + t252 * t30) + (t111 * t206 * t66 + t131 * t145 * t71 + t256 * t262 * t59 + t260 * t30) * t77 + t59 * (param.g_x * t111 * t241 - t268 * t288) - t40 * t244 * t270 - t83 * (-param.g_y * t262 * t52 + t145 * t282 + t282 * t66)) * t24;
  t324 = t43 * t24;
  t326 = t18 * t52;
  t328 = t59 * (t324 * t40 - t326);
  t333 = t31 * param.g_y;
  t351 = t131 * t144 - t24 * t260;
  t359 = t31 * param.g_x;
  t360 = t111 * t43;
  t370 = t83 * t131;
  t373 = t52 * param.g_x;
  t374 = t111 * t18;
  t381 = t18 * t24;
  t384 = t59 * (t381 * t40 + t276);
  t343 = t18 * t40;
  t349 = t40 * t43;
  t350 = t83 * t24 * param.g_z;
  m(1,6) = (t109 * (-t77 * (-t144 * t43 + t328) * param.g_x - t59 * t43 * t333 + t40 * (-t118 * t18 - t206 * t324) - (t118 * t324 - t18 * t206) * t52) + (-param.g_z * t343 - t131 * t328 + t351 * t43) * t77 + (-t268 * t326 + t349 * t350 + t359 * t360) * t59 + t40 * t111 * (-t18 * t84 + t218 * t324) - t24 * t276 * t370 - t71 * (t268 * t62 + t373 * t374)) * t19 - t13 * (t109 * (t77 * (-t144 * t18 + t384) * param.g_x + t59 * t18 * t333 + t40 * (-t118 * t43 + t206 * t381) + t52 * (t118 * t381 + t206 * t43)) + (-param.g_z * t349 + t131 * t384 - t18 * t351) * t77 + (-t268 * t276 - t343 * t350 - t359 * t374) * t59 - t40 * (t218 * t381 + t43 * t84) * t111 + t24 * t326 * t370 - t71 * (-t18 * t268 * t31 + t360 * t373));
  t428 = t13 * t24;
  t432 = t40 * (param.sp7_x * t31 - param.sp7_y * t428);
  t433 = t19 * t52;
  t435 = param.sp7_y * t433 + t432;
  t437 = t31 * t13;
  t440 = param.sp7_x * t24 + param.sp7_y * t437;
  t447 = param.g_y * param.sp7_y;
  t448 = t71 * t428;
  t450 = param.g_y * param.sp7_x;
  t452 = t83 * param.sp7_y;
  t453 = param.g_x * t19;
  t457 = t13 * param.sp7_y;
  t458 = t24 * t118;
  t460 = t19 * t71;
  t462 = t83 * param.sp7_x;
  t471 = param.g_z * param.sp7_y;
  t472 = t40 * t19;
  t474 = t71 * t111;
  t476 = t13 * t52;
  t480 = t111 * t13;
  t481 = t71 * t480;
  t483 = param.g_z * param.sp7_x;
  t497 = -param.g_x * t111 * t13 * t31 + t268 * t433;
  t501 = t24 * t218;
  t503 = t19 * t83;
  t505 = t71 * param.sp7_x;
  t510 = t52 * t480;
  t519 = t31 * t83;
  t521 = t71 * param.sp7_y;
  t530 = t40 * (param.sp7_x * t428 + param.sp7_y * t31);
  t532 = -param.sp7_x * t433 + t530;
  t536 = param.sp7_x * t437 - param.sp7_y * t24;
  t548 = t13 * param.sp7_x;
  t468 = t111 * t59 * param.g_y;
  t489 = t111 * t24 * param.g_x;
  t512 = t83 * t13 * t144;
  m(1,7) = -param.m7 * ((t109 * (-t77 * (t435 * t59 + t440 * t71) * param.g_x + t59 * t440 * param.g_y + t40 * (-t144 * t450 + t447 * t448 + t452 * t453) - (t359 * t462 + t447 * t460 - t457 * t458) * t52) + (-t435 * t468 + t472 * t471 + t24 * (-t450 * t474 + t471 * t476) - (t447 * t481 + t483 * t52) * t31) * t77 + (-param.sp7_x * t489 + param.sp7_y * t497 + t268 * t432) * t59 + t40 * (t359 * t505 + t447 * t503 - t457 * t501) * t111 + t24 * (t447 * t510 + t483 * t71) * t83 + t471 * t512 - (t450 * t519 - t453 * t521) * t280) * t3 + (t109 * (t77 * (t532 * t59 - t536 * t71) * param.g_x + t59 * t536 * param.g_y + t40 * (t144 * t447 + t448 * t450 + t453 * t462) - (-t359 * t452 + t450 * t460 - t458 * t548) * t52) + (t532 * t468 + t472 * t483 + t24 * (t447 * t474 + t476 * t483) - (t450 * t481 - t471 * t52) * t31) * t77 + (param.sp7_x * t497 + param.sp7_y * t489 - t268 * t530) * t59 + t40 * (-t359 * t521 + t450 * t503 - t501 * t548) * t111 + t24 * (t450 * t510 - t471 * t71) * t83 + t483 * t512 + (t447 * t519 + t453 * t505) * t280) * t6);
  tmpreturn = m';
