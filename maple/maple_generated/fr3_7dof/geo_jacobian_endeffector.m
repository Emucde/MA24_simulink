function tmpreturn = geo_jacobian_endeffector(q, param)
  m = [0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0;];
  t1 = q(5);
  t2 = cos(t1);
  t3 = q(6);
  t4 = cos(t3);
  t7 = sin(t3);
  t5 = param.l5 * t4;
  t8 = param.l6 * t7;
  t10 = -t2 * t5 - t2 * t8 + param.l3;
  t11 = q(4);
  t12 = cos(t11);
  t13 = t12 * t10;
  t15 = param.l5 * t7;
  t16 = -param.l6 * t4 + param.l4 + t15;
  t17 = sin(t11);
  t20 = q(3);
  t21 = cos(t20);
  t23 = sin(t20);
  t24 = sin(t1);
  t25 = t24 * t23;
  t28 = t5 + t8;
  t29 = t28 * t25;
  t30 = t21 * (t16 * t17 - param.l3 + t13) + t29;
  t31 = q(2);
  t32 = cos(t31);
  t35 = -t10;
  t37 = t12 * t16 + t17 * t35 + param.l2;
  t38 = sin(t31);
  t39 = t38 * t37;
  t40 = t30 * t32 - t39;
  t41 = q(1);
  t42 = sin(t41);
  t44 = cos(t41);
  t46 = t21 * t28 * t24;
  t47 = t12 * t35;
  t48 = -t16;
  t49 = t17 * t48;
  t50 = t47 + t49 + param.l3;
  t52 = t23 * t50 + t46;
  m(1,1) = t40 * t42 - t44 * t52;
  t56 = t30 * t38 + t32 * t37;
  m(1,2) = t44 * t56;
  t57 = t17 * t4;
  t58 = param.l6 * t57;
  t54 = t17 * (t15 + param.l4);
  t61 = t54 - param.l3 + t13 - t58;
  t63 = t23 * t61 - t46;
  m(1,3) = t44 * t63 * t32 + (t21 * t61 + t29) * t42;
  t73 = -t2 * t28 + param.l3;
  t82 = t12 * (t21 * t32 * t48 - t38 * t73) + (t21 * t32 * t73 + t38 * t48) * t17;
  t84 = t23 * t42;
  t87 = t12 * t48 + t17 * t73;
  m(1,4) = t44 * t82 - t84 * t87;
  t94 = t23 * t2;
  t85 = t21 * t12;
  t88 = t17 * t38;
  t96 = (t32 * t85 + t88) * t24 + t32 * t94;
  t101 = -t12 * t23 * t24 + t2 * t21;
  t103 = t101 * t42 + t44 * t96;
  m(1,5) = -t103 * t28;
  t108 = param.l6 * t12 * t2 - param.l5 * t17;
  t110 = param.l6 * t25;
  t113 = t17 * t2;
  t115 = t12 * param.l5;
  t116 = param.l6 * t113 + t115;
  t122 = param.l6 * t17 + t115 * t2;
  t125 = -param.l5 * t25 + t122 * t21;
  t130 = param.l5 * t17 * t2 - param.l6 * t12;
  t134 = t4 * (t32 * (t108 * t21 - t110) + t116 * t38) - t7 * (t125 * t32 + t130 * t38);
  t138 = -t108;
  t137 = t21 * t24;
  t147 = t4 * (-param.l6 * t21 * t24 + t138 * t23) + (param.l5 * t137 + t122 * t23) * t7;
  m(1,6) = t134 * t44 + t147 * t42;
  m(1,7) = 0.0e0;
  m(2,1) = t44 * (t32 * (t21 * t50 - t29) + t39) - t52 * t42;
  m(2,2) = t56 * t42;
  t161 = t32 * t42;
  m(2,3) = ((-t54 + param.l3 + t47 + t58) * t21 - t29) * t44 + t63 * t161;
  m(2,4) = t23 * t44 * t87 + t42 * t82;
  t168 = -t101 * t44 + t42 * t96;
  m(2,5) = -t28 * t168;
  m(2,6) = t134 * t42 - t147 * t44;
  m(2,7) = 0.0e0;
  m(3,1) = 0.0e0;
  m(3,2) = t40;
  m(3,3) = -t38 * t63;
  t178 = t21 * t38;
  m(3,4) = (-t12 * t73 + t49) * t32 - t87 * t178;
  m(3,5) = t28 * ((t24 * t85 + t94) * t38 - t32 * t24 * t17);
  m(3,6) = t38 * (t4 * (t138 * t21 + t110) + t125 * t7) + t32 * (t116 * t4 - t130 * t7);
  m(3,7) = 0.0e0;
  m(4,1) = 0.0e0;
  m(4,2) = -t42;
  m(4,3) = t38 * t44;
  t197 = t32 * t44;
  m(4,4) = t197 * t23 + t21 * t42;
  t195 = t38 * t12;
  m(4,5) = t17 * (-t197 * t21 + t84) + t195 * t44;
  m(4,6) = t103;
  t207 = t12 * t2 * t21 - t25;
  t218 = (t2 * t88 + t207 * t32) * t7 - t4 * (-t17 * t21 * t32 + t195);
  t226 = (t12 * t94 + t137) * t7 + t17 * t23 * t4;
  m(4,7) = t218 * t44 - t226 * t42;
  m(5,1) = 0.0e0;
  m(5,2) = t44;
  m(5,3) = t38 * t42;
  m(5,4) = t161 * t23 - t21 * t44;
  m(5,5) = t17 * (-t161 * t21 - t23 * t44) + t42 * t195;
  m(5,6) = t168;
  m(5,7) = t218 * t42 + t226 * t44;
  m(6,1) = 0.1e1;
  m(6,2) = 0.0e0;
  m(6,3) = t32;
  t238 = t23 * t38;
  m(6,4) = -t238;
  m(6,5) = t12 * t32 + t178 * t17;
  m(6,6) = t24 * (-t12 * t178 + t17 * t32) - t2 * t238;
  m(6,7) = t38 * (-t207 * t7 - t21 * t57) - (-t113 * t7 + t12 * t4) * t32;
  tmpreturn = m;
