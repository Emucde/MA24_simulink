function tmpreturn = geo_jacobian_endeffector(q, param)
  m = [0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0; 0 0 0 0 0 0 0;];
  t1 = q(5);
  t2 = cos(t1);
  t3 = q(6);
  t4 = cos(t3);
  t7 = sin(t3);
  t5 = param.l5 * t4;
  t8 = param.l6 * t7;
  t10 = -t2 * t5 - t2 * t8 + param.l3;
  t11 = q(4);
  t12 = cos(t11);
  t13 = t12 * t10;
  t15 = param.l5 * t7;
  t16 = -param.l6 * t4 + param.l4 + t15;
  t17 = sin(t11);
  t20 = q(3);
  t21 = cos(t20);
  t23 = sin(t20);
  t24 = sin(t1);
  t25 = t24 * t23;
  t28 = t5 + t8;
  t29 = t28 * t25;
  t30 = t21 * (t16 * t17 - param.l3 + t13) + t29;
  t31 = q(2);
  t32 = cos(t31);
  t34 = sin(t31);
  t36 = -t10;
  t38 = t12 * t16 + t17 * t36 + param.l2;
  t39 = t38 * t34;
  t40 = t30 * t32 - t39;
  t41 = q(1);
  t42 = sin(t41);
  t45 = t21 * t28 * t24;
  t46 = t12 * t36;
  t47 = -t16;
  t48 = t17 * t47;
  t49 = t46 + t48 + param.l3;
  t51 = t23 * t49 + t45;
  t52 = cos(t41);
  m(1,1) = t40 * t42 - t51 * t52;
  t56 = t30 * t34 + t32 * t38;
  m(1,2) = t52 * t56;
  t57 = t17 * t4;
  t58 = param.l6 * t57;
  t54 = t17 * (t15 + param.l4);
  t61 = t54 - param.l3 + t13 - t58;
  t63 = t23 * t61 - t45;
  m(1,3) = t52 * t32 * t63 + t42 * (t21 * t61 + t29);
  t73 = -t2 * t28 + param.l3;
  t74 = t21 * t32;
  t82 = t12 * (t21 * t32 * t47 - t34 * t73) + (t34 * t47 + t73 * t74) * t17;
  t86 = t12 * t47 + t17 * t73;
  t81 = t23 * t42;
  m(1,4) = t52 * t82 - t81 * t86;
  t94 = t23 * t2;
  t85 = t21 * t12;
  t88 = t17 * t34;
  t96 = (t32 * t85 + t88) * t24 + t32 * t94;
  t101 = -t12 * t23 * t24 + t2 * t21;
  t103 = t101 * t42 + t52 * t96;
  m(1,5) = -t103 * t28;
  t108 = param.l6 * t12 * t2 - param.l5 * t17;
  t110 = param.l6 * t25;
  t113 = t17 * t2;
  t115 = t12 * param.l5;
  t116 = param.l6 * t113 + t115;
  t122 = param.l6 * t17 + t115 * t2;
  t126 = -param.l5 * t23 * t24 + t122 * t21;
  t131 = param.l5 * t17 * t2 - param.l6 * t12;
  t135 = t4 * (t32 * (t108 * t21 - t110) + t116 * t34) - t7 * (t126 * t32 + t131 * t34);
  t139 = -t108;
  t138 = t21 * t24;
  t148 = t4 * (-param.l6 * t21 * t24 + t139 * t23) + t7 * (param.l5 * t138 + t122 * t23);
  m(1,6) = t135 * t52 + t148 * t42;
  m(1,7) = 0.0e0;
  m(2,1) = t52 * (t32 * (t21 * t49 - t29) + t39) - t51 * t42;
  m(2,2) = t42 * t56;
  m(2,3) = ((-t54 + param.l3 + t46 + t58) * t21 - t29) * t52 + t32 * t42 * t63;
  t159 = t52 * t23;
  m(2,4) = t159 * t86 + t42 * t82;
  t169 = -t101 * t52 + t42 * t96;
  m(2,5) = -t169 * t28;
  m(2,6) = t135 * t42 - t148 * t52;
  m(2,7) = 0.0e0;
  m(3,1) = 0.0e0;
  m(3,2) = t40;
  m(3,3) = -t63 * t34;
  m(3,4) = (-t12 * t73 + t48) * t32 - t34 * t21 * t86;
  m(3,5) = t28 * ((t24 * t85 + t94) * t34 - t32 * t24 * t17);
  m(3,6) = t34 * (t4 * (t139 * t21 + t110) + t126 * t7) + t32 * (t116 * t4 - t131 * t7);
  m(3,7) = 0.0e0;
  m(4,1) = 0.0e0;
  m(4,2) = -t42;
  m(4,3) = t34 * t52;
  t198 = t32 * t52;
  m(4,4) = t198 * t23 + t21 * t42;
  t196 = t34 * t12;
  m(4,5) = (-t198 * t21 + t81) * t17 + t52 * t196;
  m(4,6) = t103;
  t209 = t12 * t2 * t21 - t25;
  t220 = (t2 * t88 + t209 * t32) * t7 - t4 * (-t17 * t74 + t196);
  t228 = (t12 * t94 + t138) * t7 + t17 * t23 * t4;
  m(4,7) = t220 * t52 - t228 * t42;
  m(5,1) = 0.0e0;
  m(5,2) = t52;
  m(5,3) = t42 * t34;
  t230 = t32 * t42;
  m(5,4) = -t21 * t52 + t23 * t230;
  m(5,5) = (-t21 * t230 - t159) * t17 + t42 * t196;
  m(5,6) = t169;
  m(5,7) = t220 * t42 + t228 * t52;
  m(6,1) = 0.1e1;
  m(6,2) = 0.0e0;
  m(6,3) = t32;
  t241 = t23 * t34;
  m(6,4) = -t241;
  t242 = t21 * t34;
  m(6,5) = t12 * t32 + t17 * t242;
  m(6,6) = t24 * (-t12 * t242 + t17 * t32) - t2 * t241;
  m(6,7) = t34 * (-t209 * t7 - t21 * t57) - (-t113 * t7 + t12 * t4) * t32;
  tmpreturn = m;
